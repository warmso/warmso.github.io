<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>dart快速上手 | Leo Chang</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">dart快速上手</h1><a id="logo" href="/.">Leo Chang</a><p class="description">不定期更新的个人小站</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">dart快速上手</h1><div class="post-meta">Jan 25, 2019<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.4k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 5</span><span class="post-meta-item-text"> 分钟</span></span></span></div><a class="disqus-comment-count" data-disqus-identifier="2019/01/25/dart快速上手/" href="/2019/01/25/dart快速上手/#disqus_thread"></a><div class="post-content"><p>dart语言用于flutter开发，所以最近在dart的语法学习的过程中总结一点从其他语言到dart的异同点，以便少踩坑。（语法参考的是官方文档）</p>
<a id="more"></a>
<h3 id="1-字符串中引用变量或者表达式的值："><a href="#1-字符串中引用变量或者表达式的值：" class="headerlink" title="1. 字符串中引用变量或者表达式的值："></a>1. 字符串中引用变量或者表达式的值：</h3><p>C语言的printf函数中是使用%符号作为变量或者表达式的引用：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf('a`s value is %d ', a);</span><br></pre></td></tr></table></figure></p>
<p>在dart中是这样的：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'a`s value is $a'</span>);</span><br><span class="line"><span class="comment">//dart使用的是$符号。</span></span><br></pre></td></tr></table></figure></p>
<h3 id="2-final和const"><a href="#2-final和const" class="headerlink" title="2.final和const"></a>2.final和const</h3><p>const也是final类型的，不过const是编译时常量，final是在第一次使用的时候初始化的，第一次赋值的时候就确定下来了，之后再不能修改了。所以实例变量可以是final但是不可以是const修饰。</p>
<p>const变量如果声明在类中，最好直接定义为static const。<br>除此之外，const还用来声明一些不变的值（不可变对象、数组等）。</p>
<h3 id="3-bool类型很重要"><a href="#3-bool类型很重要" class="headerlink" title="3.bool类型很重要"></a>3.bool类型很重要</h3><p>在其他的语言中，有时候是很习惯用一些空值or非空值变量本身作为判断条件：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a)&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a != 0"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样看也没什么问题，如果a的值是0，条件判断会为假。</p>
<p>但是在dart中就不一样了，dart的判断条件只认正经bool类型，所以对于如上代码，dart总会判断为假，因为a变量是一个int类型，压根就不是bool类型，更不可能为true对象。</p>
<p>所以在dart中，需要显式判断数据，然后返回一个布尔值作为if、while等的判断条件。</p>
<h3 id="4-方法定义"><a href="#4-方法定义" class="headerlink" title="4.方法定义"></a>4.方法定义</h3><p>诚然在类中还是不可以再定义一个类，不过dart的方法定义中是可以再定义一个方法的。</p>
<h3 id="5-默认参数语法的版本变动"><a href="#5-默认参数语法的版本变动" class="headerlink" title="5.默认参数语法的版本变动"></a>5.默认参数语法的版本变动</h3><p>1.21之前的dartSDK版本是用 ：冒号指定可选参数的默认值，后来版本更新了以后，需要用 = 等号来指定。如果遇到了升级版本后出现的语法错误，需要注意一下这里。</p>
<h3 id="6-级联操作符"><a href="#6-级联操作符" class="headerlink" title="6.级联操作符"></a>6.级联操作符</h3><p>dart也有支持类似链式调用的语法，区别于其他常见语言的 “.”点号，dart使用的是“..”，叫级联操作符（然而实际上并不是一个操作符，而是一个语法）。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">querySelector</span>(<span class="string">'#button'</span>) <span class="comment">// Get an object.</span></span><br><span class="line">  ..text = <span class="string">'Confirm'</span>   <span class="comment">// Use its members.</span></span><br><span class="line">  ..classes.add(<span class="string">'important'</span>)</span><br><span class="line">  ..onClick.listen((e) =&gt; <span class="built_in">window</span>.alert(<span class="string">'Confirmed!'</span>));</span><br></pre></td></tr></table></figure></p>
<p>（偷官方那个例子用嘻嘻）<br>第一个方法返回一个对象，然后后面的操作语句的对象都是第一个返回的那个对象（的成员变量），并且后续操作的返回值都忽略掉了。</p>
<p>级联操作符可以嵌套使用。</p>
<h3 id="7-类的构造方法"><a href="#7-类的构造方法" class="headerlink" title="7.类的构造方法"></a>7.类的构造方法</h3><p>dart的面向对象是单继承。dart提供了一个语法糖可以简化构造方法的一些比较枯燥单一的赋值操作：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line"></span><br><span class="line">  Point(<span class="built_in">num</span> x, <span class="built_in">num</span> y) &#123;</span><br><span class="line">    <span class="comment">// There's a better way to do this, stay tuned.</span></span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>语法糖如下：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Syntactic sugar for setting x and y</span></span><br><span class="line">  <span class="comment">// before the constructor body runs.</span></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>并且子类并不继承父类的构造方法。</p>
<p><strong>在构造函数调用其他函数的时候，在 ：之后调用其他的方法：</strong><br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Point.alongXAxis(<span class="built_in">num</span> x) : <span class="keyword">this</span>(x, <span class="number">0</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong>需要调用父类的初始化方法，并且父类只有一个命名初始化方法时，则必须</strong> ：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Son.fromJson(<span class="built_in">Map</span> data) : <span class="keyword">super</span>.fromJson(data) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'in Son Class'</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>dart提供了初始化列表的语法：</strong><br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Son.fromJson(<span class="built_in">Map</span> jsonMap)</span><br><span class="line">      : x = jsonMap[<span class="string">'x'</span>],</span><br><span class="line">        y = jsonMap[<span class="string">'y'</span>] &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'In Son.fromJson(): ($x, $y)'</span>); <span class="comment">//用:开始参数列表的赋值，用逗号分隔参数，右边不能使用this引用成员变量</span></span><br></pre></td></tr></table></figure></p>
<p><strong>几种构造方法的调用顺序如下：</strong></p>
<p>-&gt;<br>initializer list（初始化参数列表） </p>
<p>-&gt;<br>superclass’s no-arg constructor（超类的无名构造函数）</p>
<p>-&gt;<br>main class’s no-arg constructor（主类的无名构造函数）</p>
<p><strong>如果该对象的实例是一个不可变的对象，使用常量构造函数</strong><br>在构造函数之前声明const关键字，并且所有成员变量为final。</p>
<p><strong>如果要使用工厂模式的构造方法，可以使用factory关键字</strong><br>工厂模式的构造方法并不是每次都直接生成一个实例。有时候是需要从缓存中找到一个实例并返回，有的时候是需要返回某一个子类的实例（比如iOS开发中的UIButton，工厂方法返回的是UIButton的子类的实例）</p>
<h3 id="7-类的访问控制"><a href="#7-类的访问控制" class="headerlink" title="7.类的访问控制"></a>7.类的访问控制</h3><p>dart并没有关键字来表示私有还是开放访问，所以只是比较简单使用“ _ ” 来标识私有成员</p>
<h3 id="mixins-混合"><a href="#mixins-混合" class="headerlink" title="mixins 混合"></a>mixins 混合</h3><p>要重复使用类中的代码但是又不用走继承方式，那么就可以使用mixins方式去组合两个类：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用with关键字，表示类C是由类A和类B混合而构成</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> = <span class="title">A</span> <span class="title">with</span> <span class="title">B</span>;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h3><p>类方法需要用static关键字来实现为静态函数，当然类方法中是不可以访问this的。</p>
<h3 id="包的引入支持懒加载"><a href="#包的引入支持懒加载" class="headerlink" title="包的引入支持懒加载"></a>包的引入支持懒加载</h3><p>可以用deferred as 来标识要懒加载的包。然后在使用的时候用loadLibrary（）函数来加载库（可以指定是同步方式还是异步方式）。</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>当然双斜线还是可以用的啦～</p>
<blockquote>
<p>(<em>之后有空还会更新哦～</em>)</p>
</blockquote>
</div><iframe src="/donate/?AliPayQR=/img/AliPayQR.png&amp;WeChatQR=/img/WeChatQR.png&amp;GitHub=null&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Leo Chang</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2019/01/25/dart快速上手/">http://github.com/warmso.io/2019/01/25/dart快速上手/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！</li></ul></div><br><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://github.com/warmso.io/2019/01/25/dart快速上手/" data-id="cjrc7nl8w000r4vfelld5rjew" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACN0lEQVR42u3aQW4jMQwEQP//0w6wpwUWo3RTmwCWSqdgEmtUPjAUydcrXu8/a/3bv9e/z9dP8ndtLQwMjI9lvJfr6fXJZ9fHfTr603ufdsbAwLiHkWy9xrRBdgePgYGBsQ6CSVKYh86d92JgYGAMt4tTyeQSi4GBgdFeYmevSYLsLInEwMC4h9E2Bn7z5x/sb2BgYHwI412udTKXh8K2IfrNqTAwMI5mJKMS+8G3Lczl0bWY+MDAwPhYRh4c28Gv/Cq7/6VgYGDcwGhHuKKt4yGMNrxGGS4GBsahjORj+82AtsRfdzYwMDCOY7TXyNl1tw3fW6U9DAyMQxl1CX5jUGOWSib/BjAwMM5mJCEyCXzt9bV9UoxlYGBgHMfI06/kwpkcYrZnlBpiYGBcw9i/ZOaw9osrAi4GBsYRjLxw345Q7LQ5o+ogBgbGZYxZ2tcmiHnDsm2CYmBg3MBow+4ssM5GvqLQj4GBcQGjbQ/k6d1saKMO/RgYGEczZkX8pBzWhuZZWomBgXEDIy+rtYX+ncBdB3oMDIwrGW2QnSV2s8GOqNyGgYFxEKMNlMmx8tGKZJ+dkTIMDIwzGO9yzS6u67+MmpTrxBQDA+NoRr5mR28TvqTNUKSGGBgYBzFmQTBP+9pmZN5awMDAuI0xC4JtApcft702Y2BgYLQVu9nA2X9IDTEwMDCC0bHkKDulusf3YmBgXMCYFevbHfKSXJ1QYmBgHM3YujrGIxRJaG5Tw1e7MDAwPo/xBVHGhJr5AN7fAAAAAElFTkSuQmCC">分享</a><div class="tags"></div><div class="post-nav"><a class="next" href="/2019/01/01/2018-年终总结/">2018 年终总结</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://github.com/warmso.io/2019/01/25/dart快速上手/';
    this.page.identifier = '2019/01/25/dart快速上手/';
    this.page.title = 'dart快速上手';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//[object Object].disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//[object Object].disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://[object Object].disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/客户端/">客户端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/客户端/读书笔记/">读书笔记</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/0基础/" style="font-size: 15px;">0基础</a> <a href="/tags/客户端/" style="font-size: 15px;">客户端</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/01/25/dart快速上手/">dart快速上手</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/01/2018-年终总结/">2018 年终总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/18/初识SVN/">初识SVN</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/18/Android-从0开始的学习之路（下）/">《Android第一行代码》读书笔记（下）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/04/Android从0开始的菜鸡学习之路/">《Android第一行代码》读书笔记（上）</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//[object Object].disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Leo Chang.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>